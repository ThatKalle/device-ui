{
  "name": "Meshtastic Device-UI Dev",
  "build": {
    "dockerfile": "Dockerfile"
  },

  // Adding GPUs to the container requires host machine software
  // AMD: AMD ROCmâ„¢ Software
  // NVIDIA: NVIDIA Container Toolkit
  // "hostRequirements": {
  //   "gpu": true
  // },
  // "runArgs": ["--gpus=all"],

  "features": {
    "ghcr.io/trunk-io/devcontainer-feature/trunk:1": {},
    "ghcr.io/devcontainers/features/node:1": {},
    "ghcr.io/devcontainers/features/desktop-lite:1": {}
  },

  "forwardPorts": [5901, 6080],
  "portsAttributes": {
    "5901": {
      "label": "VNC server (TigerVNC)",
      "onAutoForward": "silent"
    },
    "6080": {
      "label": "VNC web client (noVNC)",
      "onAutoForward": "openBrowserOnce"
    }
  },

  "customizations": {
    "vscode": {
      "extensions": [
        "Trunk.io",
        "ms-vscode.cpptools-extension-pack",
        "ms-azuretools.vscode-docker"
      ],
      "settings": {
        "editor.formatOnSave": true,
        "editor.defaultFormatter": "trunk.io",
        "trunk.enableWindows": true,
        "files.insertFinalNewline": false,
        "files.trimFinalNewlines": false,
        "cmake.configureOnOpen": false,
        "[cpp]": {
          "editor.defaultFormatter": "trunk.io"
        }
      }
    }
  },

  "postCreateCommand": "sudo chown -R vscode /workspaces && npm install lv_i18n -g --no-fund --no-update-notifier"
}
